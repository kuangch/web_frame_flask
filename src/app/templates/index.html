<!DOCTYPE html>
<html ng-app="app_index">
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
        .person{
            border: 1px gray solid;
            padding: 5px;
            margin-bottom: 5px;
        }
    </style>
</head>
<body ng-controller="ctrl_index">
<div class="person">
   <div>姓名:{{person.name}}</div><div>性别:{{person.sex}}</div>
</div>
<div class="person">
   <div>姓名:{{person2.name}}</div><div>性别:{{person2.sex}}</div>
</div>
<div class="person">
   <div>姓名:{{person3.name}}</div><div>性别:{{person3.sex}}</div>
</div>

</body>
</html>
<script src="/static/modules/jquery/jquery-1.11.3.min.js"></script>
<script src="/static/modules/angularjs/angular.min.js" type="text/javascript"></script>
<script src="/static/modules/angularjs/angular-animate.min.js" type="text/javascript"></script>
<script src="/static/modules/socketio/socket.io.min.js"></script>
<script>
    var SOCKET_NAMESPACE = '/notification_push';
    var MsgTpye = {
        HEADER_PERSON_PASS_INFO: "person_pass_info"
    };
    var module = angular.module('app_index', ['ngAnimate']);
    module.controller(
            'ctrl_index', function ($scope, $http) {


                // socket connect
                socket = io.connect('http://' + document.domain + ':' + location.port + SOCKET_NAMESPACE);
                socket.on('connect', function () {
                    console.log('connect');
                });
                socket.on('disconnect', function () {
                    console.log('disconnect');
                });

                // start record
                socket.on(MsgTpye.HEADER_PERSON_PASS_INFO, function (msg) {
                    var person = JSON.parse(msg.data);

                    if(person.id && person.id=='2')
                        $scope.person2 = person;
                    else if(person.id && person.id=='3')
                        $scope.person3 = person;
                    else
                        $scope.person = person;
                    $scope.$apply();

                });

            }
    );
</script>